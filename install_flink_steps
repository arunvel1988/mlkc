kubectl create -f https://github.com/jetstack/cert-manager/releases/download/v1.8.2/cert-manager.yaml


kubectl create ns flink
helm repo add flink-operator-repo https://downloads.apache.org/flink/flink-kubernetes-operator-1.12.0
helm install flink-kubernetes-operator flink-operator-repo/flink-kubernetes-operator -n flink


apiVersion: flink.apache.org/v1beta1
kind: FlinkDeployment
metadata:
  name: basic-flink
  namespace: default
spec:
  image: flink:1.18
  flinkVersion: v1_18
  serviceAccount: flink
  jobManager:
    resource:
      memory: "1024m"
      cpu: 0.5
    replicas: 1
  taskManager:
    resource:
      memory: "1024m"
      cpu: 0.5
    replicas: 2
  job:
    jarURI: local:///opt/flink/examples/streaming/TopSpeedWindowing.jar
    parallelism: 2
    upgradeMode: stateless



kubectl port-forward svc/basic-flink-rest 8081:8081 -n default --address 0.0.0.0

